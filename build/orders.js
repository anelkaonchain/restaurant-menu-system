(()=>{"use strict";const e=window.React,t=window.wp.element,n={en:{common:{add_new:"Add New",edit:"Edit",delete:"Delete",save:"Save",cancel:"Cancel",loading:"Loading...",name:"Name",description:"Description",price:"Price",actions:"Actions",translate:"Translate"},menu_items:{title:"Restaurant Menu",add_new_item:"Add New Item",item_name:"Item Name",item_price:"Price ($)",allergens:"Allergens",category:"Category",select_category:"Select a category",item_image:"Item Image",remove_image:"Remove Image"},categories:{title:"Menu Categories",add_new_category:"Add New Category",category_name:"Category Name",slug:"Slug",count:"Count",items:"items"},orders:{title:"Orders",all:"All",pending:"Pending",preparing:"Preparing",ready:"Ready",delivered:"Delivered",cancelled:"Cancelled",order:"Order",table:"Table",customer_name:"Customer Name",items:"Items",notes:"Notes",total:"Total",start_preparing:"Start Preparing",mark_ready:"Mark Ready",mark_delivered:"Mark Delivered",confirm_delete:"Are you sure?",no_orders:"No orders found"},qrcodes:{title:"QR Codes",add_new_table:"Add New Table",table_number:"Table Number"},settings:{title:"Settings",application_language:"Application Language",admin_panel_language:"Admin Panel Language"}},tr:{common:{add_new:"Yeni Ekle",edit:"Düzenle",delete:"Sil",save:"Kaydet",cancel:"İptal",loading:"Yükleniyor...",name:"İsim",description:"Açıklama",price:"Fiyat",actions:"İşlemler",translate:"Çevir"},menu_items:{title:"Restoran Menüsü",add_new_item:"Yeni Ürün Ekle",item_name:"Ürün Adı",item_price:"Fiyat ($)",allergens:"Alerjenler",category:"Kategori",select_category:"Bir kategori seçin",item_image:"Ürün Görseli",remove_image:"Görseli Kaldır"},categories:{title:"Menü Kategorileri",add_new_category:"Yeni Kategori Ekle",category_name:"Kategori Adı",slug:"Slug",count:"Adet",items:"ürün"},orders:{title:"Siparişler",all:"Tümü",pending:"Bekliyor",preparing:"Hazırlanıyor",ready:"Hazır",delivered:"Teslim Edildi",cancelled:"İptal Edildi",order:"Sipariş",table:"Masa",customer_name:"Müşteri Adı",items:"Ürünler",notes:"Notlar",total:"Toplam",start_preparing:"Hazırlamaya Başla",mark_ready:"Hazır Olarak İşaretle",mark_delivered:"Teslim Edildi Olarak İşaretle",confirm_delete:"Emin misiniz?",no_orders:"Sipariş bulunamadı"},qrcodes:{title:"QR Kodları",add_new_table:"Yeni Masa Ekle",table_number:"Masa Numarası"},settings:{title:"Ayarlar",application_language:"Uygulama Dili",admin_panel_language:"Yönetim Paneli Dili"}}},a=function(){const{t:a,language:r}=function(){const[e,a]=(0,t.useState)("en");(0,t.useEffect)(()=>{r()},[]);const r=async()=>{try{const e=new FormData;e.append("action","rms_get_settings"),e.append("nonce",window.rmsAdmin.nonce);const t=await fetch(window.rmsAdmin.ajaxUrl,{method:"POST",body:e}),n=await t.json();n.success&&n.data.admin_language&&a(n.data.admin_language)}catch(e){console.error("Failed to load language:",e)}};return{t:t=>{const a=t.split(".");let r=n[e];for(const e of a){if(!r||!r[e]){r=n.en;for(const e of a){if(!r||!r[e])return t;r=r[e]}return r}r=r[e]}return r},language:e}}(),[o,l]=(0,e.useState)([]),[i,s]=(0,e.useState)(!0),[d,p]=(0,e.useState)("pending");(0,e.useEffect)(()=>{c();const e=setInterval(c,5e3);return()=>clearInterval(e)},[]);const c=async()=>{try{const e=new FormData;e.append("action","rms_get_orders"),e.append("nonce",rmsAdmin.nonce);const t=await fetch(rmsAdmin.ajaxUrl,{method:"POST",body:e}),n=await t.json();if(n.success){const e=o,t=n.data;if(l(t),e.length>0){const n=t.filter(t=>"pending"===t.status&&!e.some(e=>e.id===t.id));n.length>0&&(m(),g(n.length))}}s(!1)}catch(e){console.error("Error fetching orders:",e),s(!1)}},m=()=>{new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBTGH0fPTgjMGHm7A7+OZQQ0OXrXp7KhWFApGn+Dyu20h").play().catch(e=>console.log("Ses çalınamadı:",e))},g=e=>{const t=document.createElement("div");t.style.cssText="\n            position: fixed;\n            top: 80px;\n            right: 20px;\n            background: linear-gradient(135deg, #FF6B35 0%, #FF8A5C 100%);\n            color: white;\n            padding: 20px 30px;\n            border-radius: 15px;\n            box-shadow: 0 8px 24px rgba(255, 107, 53, 0.4);\n            z-index: 10000;\n            font-size: 16px;\n            font-weight: 700;\n            animation: slideInRight 0.5s ease-out, pulse 2s infinite;\n            display: flex;\n            align-items: center;\n            gap: 12px;\n            max-width: 350px;\n        ",t.innerHTML=`\n            <span style="font-size: 28px;">🔔</span>\n            <div>\n                <div style="font-size: 18px; margin-bottom: 4px;">\n                    ${e} ${a("orders.pending")} ${a("orders.order")}!\n                </div>\n                <div style="font-size: 13px; opacity: 0.9;">\n                    ${a("orders.start_preparing")}\n                </div>\n            </div>\n        `;const n=document.createElement("style");n.textContent="\n            @keyframes slideInRight {\n                from {\n                    transform: translateX(400px);\n                    opacity: 0;\n                }\n                to {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n            }\n            @keyframes pulse {\n                0%, 100% {\n                    transform: scale(1);\n                }\n                50% {\n                    transform: scale(1.05);\n                }\n            }\n        ",document.head.appendChild(n),document.body.appendChild(t),setTimeout(()=>{t.style.animation="slideInRight 0.5s ease-out reverse",setTimeout(()=>{t.remove()},500)},5e3)},x=async(e,t)=>{try{const n=new FormData;n.append("action","rms_update_order_status"),n.append("nonce",rmsAdmin.nonce),n.append("id",e),n.append("status",t);const a=await fetch(rmsAdmin.ajaxUrl,{method:"POST",body:n});(await a.json()).success&&c()}catch(e){console.error("Error updating order:",e)}},y=e=>({pending:"preparing",preparing:"ready",ready:"delivered"}[e]),u="all"===d?o:o.filter(e=>e.status===d);return i?(0,e.createElement)("div",{style:{padding:"60px 20px",textAlign:"center",fontSize:"18px",color:"#6C757D"}},(0,e.createElement)("div",{style:{display:"inline-block",width:"50px",height:"50px",border:"5px solid #f3f3f3",borderTop:"5px solid #004E89",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"20px"}}),(0,e.createElement)("div",null,a("common.loading")),(0,e.createElement)("style",null,"\n                    @keyframes spin {\n                        0% { transform: rotate(0deg); }\n                        100% { transform: rotate(360deg); }\n                    }\n                ")):(0,e.createElement)("div",{style:{padding:"30px",maxWidth:"1400px",margin:"0 auto",backgroundColor:"#F8F9FA",minHeight:"100vh"}},(0,e.createElement)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px",flexWrap:"wrap",gap:"15px"}},(0,e.createElement)("h1",{style:{margin:0,fontSize:"32px",fontWeight:"700",color:"#2C3E50",display:"flex",alignItems:"center",gap:"10px"}},"📋 ",a("orders.title")),(0,e.createElement)("div",{style:{backgroundColor:"#004E89",color:"white",padding:"10px 20px",borderRadius:"10px",fontWeight:"600",fontSize:"16px"}},a("orders.total"),": ",o.length," ",a("orders.order"))),(0,e.createElement)("div",{style:{marginBottom:"30px",display:"flex",gap:"12px",flexWrap:"wrap",backgroundColor:"white",padding:"15px",borderRadius:"15px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)"}},[{key:"all",icon:"📊",color:"#004E89"},{key:"pending",icon:"🕐",color:"#FF6B35"},{key:"preparing",icon:"👨‍🍳",color:"#004E89"},{key:"ready",icon:"✅",color:"#06A77D"},{key:"delivered",icon:"🎉",color:"#6C757D"},{key:"cancelled",icon:"❌",color:"#DC3545"}].map(t=>{const n="all"===t.key?o.length:o.filter(e=>e.status===t.key).length,r=d===t.key;return(0,e.createElement)("button",{key:t.key,onClick:()=>p(t.key),style:{padding:"12px 24px",backgroundColor:r?t.color:"white",color:r?"white":"#2C3E50",border:r?"none":"2px solid #E9ECEF",borderRadius:"10px",cursor:"pointer",fontSize:"15px",fontWeight:"600",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",boxShadow:r?"0 4px 12px rgba(0,0,0,0.15)":"none",transform:r?"translateY(-2px)":"none"},onMouseEnter:e=>{r||(e.target.style.backgroundColor="#F8F9FA",e.target.style.transform="translateY(-2px)")},onMouseLeave:e=>{r||(e.target.style.backgroundColor="white",e.target.style.transform="none")}},(0,e.createElement)("span",{style:{fontSize:"18px"}},t.icon),(0,e.createElement)("span",null,a(`orders.${t.key}`)),(0,e.createElement)("span",{style:{backgroundColor:r?"rgba(255,255,255,0.3)":t.color,color:"white",padding:"2px 10px",borderRadius:"20px",fontSize:"13px",fontWeight:"700",minWidth:"28px",textAlign:"center"}},n))})),(0,e.createElement)("div",{style:{display:"grid",gap:"20px"}},0===u.length?(0,e.createElement)("div",{style:{padding:"80px 40px",textAlign:"center",background:"white",borderRadius:"15px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)"}},(0,e.createElement)("div",{style:{fontSize:"64px",marginBottom:"20px"}},"📭"),(0,e.createElement)("h3",{style:{color:"#6C757D",fontSize:"20px",fontWeight:"600"}},a("orders.no_orders"))):u.map(t=>{const n=parseFloat(t.total_price)||0,o={pending:"#FF6B35",preparing:"#004E89",ready:"#06A77D",delivered:"#6C757D",cancelled:"#DC3545"}[t.status]||"#6C757D";var l;return(0,e.createElement)("div",{key:t.id,style:{backgroundColor:"white",borderRadius:"15px",padding:"25px",boxShadow:"0 4px 12px rgba(0,0,0,0.08)",borderLeft:`6px solid ${o}`,transition:"all 0.3s ease",position:"relative"},onMouseEnter:e=>{e.currentTarget.style.boxShadow="0 8px 24px rgba(0,0,0,0.12)",e.currentTarget.style.transform="translateY(-4px)"},onMouseLeave:e=>{e.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.08)",e.currentTarget.style.transform="none"}},(0,e.createElement)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"20px",gap:"15px",flexWrap:"wrap"}},(0,e.createElement)("div",{style:{flex:1,minWidth:"200px"}},(0,e.createElement)("h3",{style:{margin:"0 0 8px 0",fontSize:"22px",fontWeight:"700",color:"#2C3E50"}},a("orders.order")," #",t.id),(0,e.createElement)("div",{style:{display:"flex",alignItems:"center",gap:"15px",flexWrap:"wrap"}},(0,e.createElement)("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:"#6C757D",fontSize:"15px"}},(0,e.createElement)("span",null,"🪑"),(0,e.createElement)("span",{style:{fontWeight:"600"}},a("orders.table")," ",t.table_number)),(0,e.createElement)("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:"#6C757D",fontSize:"14px"}},(0,e.createElement)("span",null,"🕐"),(0,e.createElement)("span",null,new Date(t.created_at).toLocaleString("tr"===r?"tr-TR":"en-US"))))),(0,e.createElement)("div",{style:{padding:"10px 20px",borderRadius:"25px",backgroundColor:o,color:"white",fontWeight:"700",fontSize:"15px",display:"flex",alignItems:"center",gap:"8px",boxShadow:`0 4px 12px ${o}40`}},(0,e.createElement)("span",{style:{fontSize:"18px"}},{pending:"🕐",preparing:"👨‍🍳",ready:"✅",delivered:"🎉",cancelled:"❌"}[t.status]||"📋"),(0,e.createElement)("span",null,a(`orders.${t.status}`)))),(0,e.createElement)("div",{style:{marginBottom:"20px",padding:"20px",backgroundColor:"#F8F9FA",borderRadius:"10px"}},(0,e.createElement)("div",{style:{fontWeight:"700",marginBottom:"12px",color:"#2C3E50",fontSize:"16px",display:"flex",alignItems:"center",gap:"8px"}},(0,e.createElement)("span",null,"🍽️"),a("orders.items"),":"),(0,e.createElement)("div",{style:{display:"grid",gap:"8px"}},Array.isArray(t.items)&&t.items.length>0?t.items.map((t,n)=>(0,e.createElement)("div",{key:n,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px",backgroundColor:"white",borderRadius:"8px",fontSize:"15px"}},(0,e.createElement)("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},(0,e.createElement)("span",{style:{backgroundColor:o,color:"white",padding:"4px 10px",borderRadius:"6px",fontSize:"13px",fontWeight:"700",minWidth:"32px",textAlign:"center"}},t.quantity,"x"),(0,e.createElement)("span",{style:{fontWeight:"600",color:"#2C3E50"}},t.name)),(0,e.createElement)("span",{style:{fontWeight:"700",color:"#06A77D",fontSize:"15px"}},"$",parseFloat(t.price).toFixed(2)))):(0,e.createElement)("div",{style:{color:"#6C757D",fontStyle:"italic"}},"No items"))),t.customer_name&&(0,e.createElement)("div",{style:{marginBottom:"15px",padding:"12px",backgroundColor:"#E7F3FF",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px"}},(0,e.createElement)("span",null,"👤"),(0,e.createElement)("strong",{style:{color:"#004E89"}},a("orders.customer_name"),":"),(0,e.createElement)("span",{style:{color:"#2C3E50"}},t.customer_name)),t.notes&&(0,e.createElement)("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#FFF3CD",borderLeft:"4px solid #FFC107",borderRadius:"8px"}},(0,e.createElement)("div",{style:{fontWeight:"700",marginBottom:"6px",color:"#856404",display:"flex",alignItems:"center",gap:"6px"}},(0,e.createElement)("span",null,"📝"),a("orders.notes"),":"),(0,e.createElement)("div",{style:{color:"#856404",fontSize:"14px"}},t.notes)),(0,e.createElement)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"20px",borderTop:"2px solid #E9ECEF",gap:"15px",flexWrap:"wrap"}},(0,e.createElement)("div",{style:{fontSize:"28px",fontWeight:"800",color:"#06A77D",display:"flex",alignItems:"center",gap:"8px"}},(0,e.createElement)("span",{style:{fontSize:"20px"}},"💰"),a("orders.total"),": $",n.toFixed(2)),(0,e.createElement)("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"}},y(t.status)&&(0,e.createElement)("button",{onClick:()=>x(t.id,y(t.status)),style:{padding:"12px 24px",backgroundColor:"#004E89",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",fontSize:"15px",fontWeight:"700",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(0,78,137,0.3)"},onMouseEnter:e=>{e.target.style.backgroundColor="#003D6E",e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 6px 16px rgba(0,78,137,0.4)"},onMouseLeave:e=>{e.target.style.backgroundColor="#004E89",e.target.style.transform="none",e.target.style.boxShadow="0 4px 12px rgba(0,78,137,0.3)"}},(l=t.status,{pending:a("orders.start_preparing"),preparing:a("orders.mark_ready"),ready:a("orders.mark_delivered")}[l])),"pending"===t.status&&(0,e.createElement)("button",{onClick:()=>x(t.id,"cancelled"),style:{padding:"12px 24px",backgroundColor:"#FFC107",color:"#2C3E50",border:"none",borderRadius:"10px",cursor:"pointer",fontSize:"15px",fontWeight:"700",transition:"all 0.3s ease"},onMouseEnter:e=>{e.target.style.backgroundColor="#FFB300",e.target.style.transform="translateY(-2px)"},onMouseLeave:e=>{e.target.style.backgroundColor="#FFC107",e.target.style.transform="none"}},a("common.cancel")),(0,e.createElement)("button",{onClick:()=>(async e=>{if(confirm(a("orders.confirm_delete")))try{const t=new FormData;t.append("action","rms_delete_order"),t.append("nonce",rmsAdmin.nonce),t.append("id",e);const n=await fetch(rmsAdmin.ajaxUrl,{method:"POST",body:t});(await n.json()).success&&c()}catch(e){console.error("Error deleting order:",e)}})(t.id),style:{padding:"12px 24px",backgroundColor:"#DC3545",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",fontSize:"15px",fontWeight:"700",transition:"all 0.3s ease"},onMouseEnter:e=>{e.target.style.backgroundColor="#C82333",e.target.style.transform="translateY(-2px)"},onMouseLeave:e=>{e.target.style.backgroundColor="#DC3545",e.target.style.transform="none"}},"🗑️ ",a("common.delete")))))})))},r=document.getElementById("rms-orders-root");r&&(0,t.createRoot)(r).render((0,e.createElement)(a,null))})();