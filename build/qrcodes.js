(()=>{"use strict";const e=window.React,t=window.wp.element,a={en:{common:{add_new:"Add New",edit:"Edit",delete:"Delete",save:"Save",saving:"Saving...",cancel:"Cancel",loading:"Loading...",name:"Name",description:"Description",price:"Price",actions:"Actions",translate:"Translate"},menu_items:{title:"Restaurant Menu",add_new_item:"Add New Item",item_name:"Item Name",item_price:"Price ($)",allergens:"Allergens",category:"Category",select_category:"Select a category",item_image:"Item Image",remove_image:"Remove Image"},categories:{title:"Menu Categories",add_new_category:"Add New Category",category_name:"Category Name",slug:"Slug",count:"Count",items:"items",no_categories:"No categories yet. Click 'Add New Category' to create one.",name_required:"Category name is required",save_success:"Category saved successfully!",save_error:"Failed to save category",delete_confirm:"Are you sure you want to delete this category?",delete_success:"Category deleted successfully!",delete_error:"Failed to delete category",load_error:"Failed to load categories"},orders:{title:"Orders",all:"All",pending:"Pending",preparing:"Preparing",ready:"Ready",delivered:"Delivered",cancelled:"Cancelled",order:"Order",table:"Table",customer_name:"Customer Name",items:"Items",notes:"Notes",total:"Total",start_preparing:"Start Preparing",mark_ready:"Mark Ready",mark_delivered:"Mark Delivered",confirm_delete:"Are you sure?",no_orders:"No orders found"},qrcodes:{title:"QR Codes",add_new_table:"Add New Table",table_number:"Table Number"},settings:{title:"Settings",application_language:"Application Language",admin_panel_language:"Admin Panel Language"}},tr:{common:{add_new:"Yeni Ekle",edit:"DÃ¼zenle",delete:"Sil",save:"Kaydet",saving:"Kaydediliyor...",cancel:"Ä°ptal",loading:"YÃ¼kleniyor...",name:"Ä°sim",description:"AÃ§Ä±klama",price:"Fiyat",actions:"Ä°ÅŸlemler",translate:"Ã‡evir"},menu_items:{title:"Restoran MenÃ¼sÃ¼",add_new_item:"Yeni ÃœrÃ¼n Ekle",item_name:"ÃœrÃ¼n AdÄ±",item_price:"Fiyat ($)",allergens:"Alerjenler",category:"Kategori",select_category:"Bir kategori seÃ§in",item_image:"ÃœrÃ¼n GÃ¶rseli",remove_image:"GÃ¶rseli KaldÄ±r"},categories:{title:"MenÃ¼ Kategorileri",add_new_category:"Yeni Kategori Ekle",category_name:"Kategori AdÄ±",slug:"Slug",count:"Adet",items:"Ã¼rÃ¼n",no_categories:"HenÃ¼z kategori yok. 'Yeni Kategori Ekle' butonuna tÄ±klayÄ±n.",name_required:"Kategori adÄ± gereklidir",save_success:"Kategori baÅŸarÄ±yla kaydedildi!",save_error:"Kategori kaydedilemedi",delete_confirm:"Bu kategoriyi silmek istediÄŸinizden emin misiniz?",delete_success:"Kategori baÅŸarÄ±yla silindi!",delete_error:"Kategori silinemedi",load_error:"Kategoriler yÃ¼klenemedi"},orders:{title:"SipariÅŸler",all:"TÃ¼mÃ¼",pending:"Bekliyor",preparing:"HazÄ±rlanÄ±yor",ready:"HazÄ±r",delivered:"Teslim Edildi",cancelled:"Ä°ptal Edildi",order:"SipariÅŸ",table:"Masa",customer_name:"MÃ¼ÅŸteri AdÄ±",items:"ÃœrÃ¼nler",notes:"Notlar",total:"Toplam",start_preparing:"HazÄ±rlamaya BaÅŸla",mark_ready:"HazÄ±r Olarak Ä°ÅŸaretle",mark_delivered:"Teslim Edildi Olarak Ä°ÅŸaretle",confirm_delete:"Emin misiniz?",no_orders:"SipariÅŸ bulunamadÄ±"},qrcodes:{title:"QR KodlarÄ±",add_new_table:"Yeni Masa Ekle",table_number:"Masa NumarasÄ±"},settings:{title:"Ayarlar",application_language:"Uygulama Dili",admin_panel_language:"YÃ¶netim Paneli Dili"}}};const n=function(){const{t:n}=function(){const[e,n]=(0,t.useState)("en");(0,t.useEffect)(()=>{r()},[]);const r=async()=>{try{const e=new FormData;e.append("action","rms_get_settings"),e.append("nonce",window.rmsAdmin.nonce);const t=await fetch(window.rmsAdmin.ajaxUrl,{method:"POST",body:e}),a=await t.json();a.success&&a.data.admin_language&&n(a.data.admin_language)}catch(e){console.error("Failed to load language:",e)}};return{t:t=>{const n=t.split(".");let r=a[e];for(const e of n){if(!r||!r[e]){r=a.en;for(const e of n){if(!r||!r[e])return t;r=r[e]}return r}r=r[e]}return r},language:e}}(),[r,i]=(0,t.useState)([]),[o,d]=(0,t.useState)(!1),[l,s]=(0,t.useState)(!1),[c,m]=(0,t.useState)(""),[g,p]=(0,t.useState)({type:"",text:""});(0,t.useEffect)(()=>{u()},[]),(0,t.useEffect)(()=>{if(g.text){const e=setTimeout(()=>{p({type:"",text:""})},3e3);return()=>clearTimeout(e)}},[g]);const u=async()=>{d(!0);const e=new FormData;e.append("action","rms_get_tables"),e.append("nonce",window.rmsAdmin.nonce);try{const t=await fetch(window.rmsAdmin.ajaxUrl,{method:"POST",body:e}),a=await t.json();a.success?i(a.data):console.error("Failed to load tables:",a)}catch(e){console.error("Load error:",e),p({type:"error",text:n("qrcodes.load_error")})}d(!1)};return(0,e.createElement)("div",{style:{maxWidth:"1200px",margin:"20px auto",padding:"0 20px"}},(0,e.createElement)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"}},(0,e.createElement)("h1",{style:{margin:0}},n("qrcodes.title")),!l&&(0,e.createElement)("button",{className:"button button-primary",onClick:()=>s(!0),disabled:o},n("qrcodes.add_new_table"))),g.text&&(0,e.createElement)("div",{style:{padding:"12px 20px",marginBottom:"20px",borderRadius:"4px",background:"success"===g.type?"#d4edda":"#f8d7da",color:"success"===g.type?"#155724":"#721c24",border:"1px solid "+("success"===g.type?"#c3e6cb":"#f5c6cb")}},g.text),l&&(0,e.createElement)("div",{style:{background:"white",padding:"25px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",marginBottom:"30px"}},(0,e.createElement)("h2",{style:{marginTop:0}},n("qrcodes.add_new_table")),(0,e.createElement)("div",{style:{marginBottom:"20px"}},(0,e.createElement)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"}},n("qrcodes.table_number")," *"),(0,e.createElement)("input",{type:"text",className:"regular-text",value:c,onChange:e=>m(e.target.value),placeholder:"1, 2, 3, A1, VIP-1...",style:{width:"100%",padding:"8px"}})),(0,e.createElement)("div",{style:{display:"flex",gap:"10px"}},(0,e.createElement)("button",{className:"button button-primary",onClick:async()=>{if(!c.trim())return void p({type:"error",text:n("qrcodes.number_required")});d(!0);const e=new FormData;e.append("action","rms_add_table"),e.append("nonce",window.rmsAdmin.nonce),e.append("table_number",c);try{const t=await fetch(window.rmsAdmin.ajaxUrl,{method:"POST",body:e}),a=await t.json();a.success?(p({type:"success",text:n("qrcodes.add_success")}),s(!1),m(""),await u()):p({type:"error",text:a.data||n("qrcodes.add_error")})}catch(e){console.error("Add error:",e),p({type:"error",text:n("qrcodes.add_error")})}d(!1)},disabled:o},n(o?"common.saving":"common.save")),(0,e.createElement)("button",{className:"button",onClick:()=>{s(!1),m("")},disabled:o},n("common.cancel")))),(0,e.createElement)("div",{style:{background:"white",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",padding:"20px"}},o&&0===r.length?(0,e.createElement)("div",{style:{padding:"40px",textAlign:"center",color:"#666"}},n("common.loading"),"..."):0===r.length?(0,e.createElement)("div",{style:{padding:"40px",textAlign:"center",color:"#666"}},n("qrcodes.no_tables")):(0,e.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"20px"}},r.map(t=>(0,e.createElement)("div",{key:t.id,style:{padding:"20px",border:"2px solid #ddd",borderRadius:"12px",textAlign:"center",background:"#fafafa"}},(0,e.createElement)("div",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"15px",color:"#2271b1"}},n("qrcodes.table")," ",t.table_number),(0,e.createElement)("div",{style:{background:"white",padding:"15px",borderRadius:"8px",marginBottom:"15px"}},(0,e.createElement)("img",{src:t.qr_code,alt:`QR Code for table ${t.table_number}`,style:{width:"100%",maxWidth:"200px",height:"auto"}})),(0,e.createElement)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"}},(0,e.createElement)("button",{className:"button button-primary",onClick:()=>(e=>{const t=window.open("","_blank");t.document.write(`\n            <!DOCTYPE html>\n            <html>\n            <head>\n                <title>${n("qrcodes.table")} ${e.table_number}</title>\n                <style>\n                    body {\n                        font-family: Arial, sans-serif;\n                        display: flex;\n                        flex-direction: column;\n                        align-items: center;\n                        justify-content: center;\n                        min-height: 100vh;\n                        margin: 0;\n                        padding: 20px;\n                    }\n                    .qr-container {\n                        text-align: center;\n                        border: 3px solid #333;\n                        padding: 30px;\n                        border-radius: 10px;\n                        background: white;\n                    }\n                    h1 {\n                        margin: 0 0 20px 0;\n                        font-size: 36px;\n                    }\n                    .table-number {\n                        font-size: 48px;\n                        font-weight: bold;\n                        color: #2271b1;\n                        margin: 20px 0;\n                    }\n                    img {\n                        max-width: 300px;\n                        margin: 20px 0;\n                    }\n                    .instructions {\n                        margin-top: 20px;\n                        font-size: 18px;\n                        color: #666;\n                    }\n                    @media print {\n                        body {\n                            padding: 0;\n                        }\n                    }\n                </style>\n            </head>\n            <body>\n                <div class="qr-container">\n                    <h1>Restaurant Menu</h1>\n                    <div class="table-number">${n("qrcodes.table")} ${e.table_number}</div>\n                    <img src="${e.qr_code}" alt="QR Code" />\n                    <div class="instructions">${n("qrcodes.scan_instruction")}</div>\n                </div>\n            </body>\n            </html>\n        `),t.document.close(),setTimeout(()=>{t.print()},250)})(t),disabled:o,style:{width:"100%"}},"ðŸ–¨ï¸ ",n("qrcodes.print_qr")),(0,e.createElement)("button",{className:"button button-link-delete",onClick:()=>(async e=>{if(!confirm(n("qrcodes.delete_confirm")))return;d(!0);const t=new FormData;t.append("action","rms_delete_table"),t.append("nonce",window.rmsAdmin.nonce),t.append("id",e);try{const e=await fetch(window.rmsAdmin.ajaxUrl,{method:"POST",body:t});(await e.json()).success?(p({type:"success",text:n("qrcodes.delete_success")}),await u()):p({type:"error",text:n("qrcodes.delete_error")})}catch(e){console.error("Delete error:",e),p({type:"error",text:n("qrcodes.delete_error")})}d(!1)})(t.id),disabled:o,style:{width:"100%",color:"#b32d2e"}},n("common.delete"))))))))},r=document.getElementById("rms-qrcodes-root");r&&(0,t.createRoot)(r).render((0,e.createElement)(n,null))})();